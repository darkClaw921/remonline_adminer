<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–¢–æ–≤–∞—Ä—ã ‚Äî –û—Å—Ç–∞—Ç–∫–∏ –ø–æ —Å–∫–ª–∞–¥–∞–º</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/products.css" rel="stylesheet">
    <link href="/static/css/tabs.css" rel="stylesheet">
    <link href="/static/css/products-tile-theme.css" rel="stylesheet">
  </head>
  <body data-theme="tile">
    <div class="container-fluid">
      <div class="d-flex align-items-center justify-content-between mb-3">
        <h5 class="mb-0">–¢–æ–≤–∞—Ä—ã –∏ –æ—Å—Ç–∞—Ç–∫–∏ –ø–æ —Å–∫–ª–∞–¥–∞–º</h5>
        <div class="d-flex gap-2 align-items-center">
          <button id="themeToggleBtn" class="btn btn-sm btn-outline-secondary" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üé®</button>
          <a class="link-secondary" href="/docs" target="_blank">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API</a>
        </div>
      </div>

      <div class="card mb-3 theme-classic-only">
        <div class="card-body py-2">
          <div class="row g-2 align-items-center">
            <div class="col-12 col-md-4 d-flex gap-2 align-items-center theme-classic-only">
              <button id="reloadBtn" class="btn btn-sm btn-primary">–û–±–Ω–æ–≤–∏—Ç—å</button>
              <button id="autoSyncBtn" class="btn btn-sm btn-outline-primary">–ê–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</button>
              <div class="progress" style="width:220px; height: 8px;">
                <div id="autoSyncProgress" class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>
            <div class="col-12 col-md-6 text-md-end">
              <input id="searchInput" class="form-control form-control-sm" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, RemID –∏–ª–∏ SKU...">
            </div>
          </div>
          <div class="row g-2 align-items-center mt-2">
            <div class="col-6 col-md-3">
              <select id="categoryFilter" class="form-select form-select-sm" multiple>
                <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
              </select>
            </div>
            <div class="col-6 col-md-3">
              <select id="warehouseFilter" class="form-select form-select-sm" multiple>
                <!-- –°–∫–ª–∞–¥—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ API -->
              </select>
            </div>
            <div class="col-12 col-md-6 d-flex gap-2 align-items-center">
              <button id="applyFilters" class="btn btn-sm btn-primary">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
              <button id="resetFilters" class="btn btn-sm btn-outline-secondary">–°–±—Ä–æ—Å</button>
              
              <!-- –ì–ª–∞–≤–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ Apple –∏ Android -->
              <div class="main-tabs d-flex gap-2 ms-3">
                <button id="appleTabBtn" class="btn btn-outline-primary main-tab-btn" data-main-type="apple">
                  üçé Apple
                </button>
                <button id="androidTabBtn" class="btn btn-outline-success main-tab-btn" data-main-type="android">
                  ü§ñ Android
                </button>
                <button id="allTabBtn" class="btn btn-outline-secondary main-tab-btn active" data-main-type="all">
                  –í—Å–µ
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–ª–∏—Ç–æ–∫ (–ø–ª–∏—Ç–æ—á–Ω–∞—è —Ç–µ–º–∞) -->
      <div id="tilesContainer" class="theme-tile-only"></div>

      <!-- –°–∏—Å—Ç–µ–º–∞ –≤–∫–ª–∞–¥–æ–∫ (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Ç–µ–º–∞) -->
      <div id="tabsContainer" class="theme-classic-only"></div>

      <div class="d-flex align-items-center justify-content-end mb-2 theme-classic-only">
        <button id="columnsSettingsBtn" class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#columnsModal" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–æ–ª–±—Ü–æ–≤">‚öôÔ∏è</button>
        <div class="spinner-border spinner-border-sm text-secondary loader ms-2" role="status" id="loader">
          <span class="visually-hidden">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        </div>
      </div>

      <div id="tableContainer" class="table-responsive theme-classic-only" style="max-height: calc(100vh - 220px);">
        <table class="table table-bordered table-hover table-sm align-middle">
          <thead>
            <tr>
              <th class="photos-col" draggable="true" data-col="photos">–§–æ—Ç–æ</th>
              <th class="name-col" draggable="true" data-col="name">–¢–æ–≤–∞—Ä</th>
              <th class="category-col" draggable="true" data-col="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
              <th style="width: 120px;" class="price-base-col text-end" draggable="true" data-col="price-base">–¶–µ–Ω–∞</th>
              <th class="price-col text-end" data-price="48388" draggable="true" data-col="price-48388">–†–æ–∑–Ω–∏—á–Ω–∞—è</th>
              <th class="price-col text-end" data-price="97150" draggable="true" data-col="price-97150">–ü–∞—Ä—Ç–Ω—ë—Ä</th>
              <th class="price-col text-end" data-price="377836" draggable="true" data-col="price-377836">–ü—Ä–æ–¥–∞–∂–∞ –∑—á</th>
              <th class="price-col text-end" data-price="555169" draggable="true" data-col="price-555169">–ü—Ä–æ–¥–∞–∂–∞ –∑—á VIP</th>
              <th class="total-col text-end" draggable="true" data-col="total">–û–±—â–∏–π –æ—Å—Ç–∞—Ç–æ–∫</th>
              <th class="warehouse-col" data-wh="2272079" draggable="true" data-col="wh-2272079">29. –°–∫–ª–∞–¥ –ö–∏—Ç–∞–π</th>
              <th class="warehouse-col" data-wh="52226" draggable="true" data-col="wh-52226">05. –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å–∫–ª–∞–¥</th>
              <th class="warehouse-col" data-wh="37746" draggable="true" data-col="wh-37746">01. –ó–∞–ø—á–∞—Å—Ç–∏ –†–æ—Å—Ç–æ–≤</th>
            </tr>
          </thead>
          <tbody id="productsBody"></tbody>
        </table>
      </div>

      <div class="d-flex gap-2 justify-content-between align-items-center mt-2 theme-classic-only">
        <div id="pagination" class="d-flex flex-wrap gap-1"></div>
        <div class="d-flex align-items-center gap-2">
          <label for="pageSize" class="form-label form-label-sm mb-0">–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ</label>
          <select id="pageSize" class="form-select form-select-sm">
            <option value="25">25</option>
            <option value="50" selected>50</option>
            <option value="100">100</option>
          </select>
        </div>
      </div>
      <div class="text-center mt-2 theme-classic-only">
        <small id="pageInfo" class="text-muted"></small>
      </div>
    </div>

    <!-- Modal: –í—ã–±–æ—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ -->
    <div class="modal fade" id="columnsModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header py-2">
            <h6 class="modal-title mb-0">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–±–ª–∏—Ü—ã</h6>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <!-- –í–∫–ª–∞–¥–∫–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö -->
            <ul class="nav nav-pills nav-fill mb-3" id="settingsTabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" id="columns-tab" data-bs-toggle="pill" data-bs-target="#columns" type="button" role="tab">–°—Ç–æ–ª–±—Ü—ã</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="tabs-tab" data-bs-toggle="pill" data-bs-target="#tabs" type="button" role="tab">–í–∫–ª–∞–¥–∫–∏</button>
              </li>
            </ul>

            <div class="tab-content" id="settingsTabContent">
              <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–æ–ª–±—Ü–æ–≤ -->
              <div class="tab-pane fade show active" id="columns" role="tabpanel">
                <div class="mb-2">
                  <strong>–û—Å–Ω–æ–≤–Ω—ã–µ</strong>
                  <div id="columnsStaticList" class="d-grid gap-1 mt-2"></div>
                </div>
                <div class="mb-2">
                  <strong>–°–∫–ª–∞–¥—ã</strong>
                  <div id="columnsWarehousesList" class="d-grid gap-1 mt-2"></div>
                </div>
              </div>

              <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∫–ª–∞–¥–æ–∫ -->
              <div class="tab-pane fade" id="tabs" role="tabpanel">
                <div id="tabsSettingsList" class="d-grid gap-2"></div>
                <button id="addNewTabBtn" class="btn btn-sm btn-outline-primary mt-3">+ –î–æ–±–∞–≤–∏—Ç—å –≤–∫–ª–∞–¥–∫—É</button>
              </div>
            </div>
          </div>
          <div class="modal-footer py-2">
            <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
            <button type="button" class="btn btn-sm btn-outline-secondary" id="columnsResetBtn">–°–±—Ä–æ—Å–∏—Ç—å</button>
          </div>
        </div>
      </div>
    </div>

    <script src="/static/js/tab.js"></script>
    <script src="/static/js/tabs.js"></script>
    <script src="/static/js/products.js"></script>
    <script src="/static/js/products-tile-theme.js"></script>
    <script src="/static/js/theme-manager.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Ç–µ–º –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
      document.addEventListener('DOMContentLoaded', () => {
        themeManager.init();
      });
    </script>
  </body>
  </html>


